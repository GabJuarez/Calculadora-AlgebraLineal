<form method="post">
    <div class="form_matriz_cuadrada">
        <label for="tamanio">Tamaño de la matriz:</label>
        <input type="number" id="tamanio" name="tamanio" value="3" min="1" max="10" step="1">
        <label for="filas">Filas:</label>
        <input type="number" id="filas" name="filas" value="3" disabled>
        <label for="columnas">Columnas:</label>
        <input type="number" id="columnas" name="columnas" value="3" disabled>
        <!-- Hidden inputs para que los valores de filas/columnas se envíen en el formulario aunque los visibles estén deshabilitados -->
        <input type="hidden" id="hidden_filas" name="filas" value="3">
        <input type="hidden" id="hidden_columnas" name="columnas" value="3">
    </div>
    <div id="matriz"></div>
    <div class="botones-formulario">
        <button type="button" class="boton_volver" onclick="window.location.href='/'">Página Principal</button>
        <button type="submit" class="boton_calcular">Calcular</button>
        <button type="reset" class="limpiar_matriz" onclick="(typeof generarMatrizCuadrada === 'function' ? generarMatrizCuadrada() : (typeof generarMatriz === 'function' ? generarMatriz() : null))">Limpiar Matriz</button>
    </div>
</form>
<script src="{{ url_for('static', filename='js/entrada_matrices_cuadradas.js') }}"></script>
<script>
    // Mantener los campos hidden sincronizados y usar la función cuadrada
    function actualizarTamanoYGenerar() {
        let tamanio = document.getElementById("tamanio").value || '3';
        document.getElementById("filas").value = tamanio;
        document.getElementById("columnas").value = tamanio;
        document.getElementById("hidden_filas").value = tamanio;
        document.getElementById("hidden_columnas").value = tamanio;
        if (typeof generarMatrizCuadrada === 'function') {
            generarMatrizCuadrada();
        } else if (typeof generarMatriz === 'function') {
            generarMatriz();
        }
    }

    document.getElementById("tamanio").addEventListener("input", actualizarTamanoYGenerar);

    // Inicializar al cargar
    document.addEventListener('DOMContentLoaded', function() {
        actualizarTamanoYGenerar();
    });
</script>
